{"name":"Thu'um Test","type":"script","author":"qwt9o1cuKYitvD9G","img":"icons/magic/sonic/scream-wail-shout-teal.webp","scope":"global","command":"let d = new Dialog({\n    title: \"Apply Roll Modifier\",\n    content: `<form>\n                <div class=\"dialogForm\">\n                <label><b>Thu'um Modifier: </b></label><input placeholder=\"ex. -20, +10\" id=\"playerInput\" value=\"0\" style=\" text-align: center; width: 50%; border-style: groove; float: right;\" type=\"text\"></input></div>\n              </form>`,\n    buttons: {\n      one: {\n        label: \"Roll!\",\n        callback: html => {\n          const playerInput = parseInt(html.find('[id=\"playerInput\"]').val());\n          let roll = new Roll(\"1d100\");\n          roll.roll({async:false});\n        \n          if (roll.total === token.actor.data.data.lucky_numbers.ln1 || roll.total == token.actor.data.data.lucky_numbers.ln2 || roll.total == token.actor.data.data.lucky_numbers.ln3 || roll.total == token.actor.data.data.lucky_numbers.ln4 || roll.total == token.actor.data.data.lucky_numbers.ln5) {\n            const content = `Rolls for <b>Thu'um</b>!\n            <p></p><b>Target Number: [[${token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value}]]</b> <p></p>\n            <b>Result: [[${roll.total}]]</b><p></p>\n            <span style='color:green; font-size:120%;'> <b>LUCKY NUMBER!</b></span>`\n        \n            roll.toMessage({type: CONST.CHAT_MESSAGE_TYPES.ROLL, user: game.user._id, speaker: ChatMessage.getSpeaker(), content: content});\n        \n          } else if (roll.total === token.actor.data.data.unlucky_numbers.ul1 || roll.total == token.actor.data.data.unlucky_numbers.ul2 || roll.total == token.actor.data.data.unlucky_numbers.ul3 || roll.total == token.actor.data.data.unlucky_numbers.ul4 || roll.total == token.actor.data.data.unlucky_numbers.ul5) {\n            const content = `Rolls for <b>Thu'um</b>!\n            <p></p><b>Target Number: [[${token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value}]]</b> <p></p>\n            <b>Result: [[${roll.total}]]</b><p></p>\n            <span style='color:red; font-size:120%;'> <b>UNLUCKY NUMBER!</b></span>`\n        \n            roll.toMessage({type: CONST.CHAT_MESSAGE_TYPES.ROLL, user: game.user._id, speaker: ChatMessage.getSpeaker(), content: content});\n        \n          } else if (token.actor.data.data.wounded === true) {\n            const content = `Rolls for <b>Thu'um</b>!\n            <p></p><b>Target Number: [[${token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value}]] </b> <p></p>\n            <b>Result: [[${roll.total}]]</b><p></p>\n            ${roll.total<=(token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value + playerInput) ? \" <span style='color:green; font-size: 120%;'> <b>SUCCESS!</b></span>\" : \" <span style='color:red; font-size: 120%;'> <b>FAILURE!</b></span>\"}`\n        \n            roll.toMessage({type: CONST.CHAT_MESSAGE_TYPES.ROLL, user: game.user._id, speaker: ChatMessage.getSpeaker(), content: content});\n  \n          } else {\n            const content = `Rolls for <b>Thu'um</b>!\n            <p></p><b>Target Number: [[${token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value}]]</b> <p></p>\n            <b>Result: [[${roll.total}]]</b><p></p>\n            ${roll.total<=(token.actor.items.find(entry => entry.name === \"Thu'um\").data.data.value + playerInput) ? \" <span style='color:green; font-size: 120%;'> <b>SUCCESS!</b></span>\" : \" <span style='color:red; font-size: 120%;'> <b>FAILURE!</b></span>\"}`\n        \n            roll.toMessage({type: CONST.CHAT_MESSAGE_TYPES.ROLL, user: game.user._id, speaker: ChatMessage.getSpeaker(), content: content});\n            }\n        }\n      },\n      two: {\n        label: \"Cancel\",\n        callback: html => console.log(\"Cancelled\")\n      }\n    },\n    default: \"one\",\n    close: html => console.log()\n  });\n  d.render(true);","folder":null,"sort":0,"permission":{"default":0,"inSimu0FutxmlwqN":3,"KoTybT0dunV5wS6T":3,"qwt9o1cuKYitvD9G":3},"flags":{"core":{"sourceId":"Macro.1wehXOdUIMnMPc1H"}},"_id":"8cnCmvuIwwd3cS9N"}
